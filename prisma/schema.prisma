generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Inscricao {
    id           String    @id @default(uuid())
    tipoCadastro String
    nomeChapa    String?
    nomeEntidade String
    segmento     Segmento
    is_chapa     Boolean
    nome         String
    email        String
    // anexoPath removido daqui, pois agora ser√° um relacionamento com o model Arquivo
    createdAt    DateTime  @default(now())

    arquivo      Arquivo?
}

model Arquivo {
    id           String    @id @default(uuid())
    caminho      String    
    inscricaoId  String    @unique 
    criadoEm     DateTime  @default(now())
    atualizadoEm DateTime  @default(now()) @updatedAt 

    inscricao    Inscricao @relation(fields: [inscricaoId], references: [id])

    @@map("arquivos") // Nome da tabela no banco de dados
}

enum Segmento {
  MOVIMENTO_DE_MORADIA
  ENTIDADES_ACADEMICAS_DE_PESQUISA
  ASSOCIACOES_DE_BAIRRO
  MOVIMENTOS_AMBIENTALISTAS
  SETOR_EMPRESARIAL
}